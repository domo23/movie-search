(this["webpackJsonpreact-movie-search"]=this["webpackJsonpreact-movie-search"]||[]).push([[0],{15:function(e,t,n){e.exports={main:"MovieGridItem_main__2LR4O",card:"MovieGridItem_card__18IAm",openingCrawl:"MovieGridItem_openingCrawl__22gS3"}},18:function(e,t,n){e.exports={searchInput:"SearchBox_searchInput__233Y1",main:"SearchBox_main__j2kgI"}},19:function(e,t,n){e.exports={select:"FilterBox_select__30_Fa",main:"FilterBox_main__vgDYa"}},32:function(e,t,n){e.exports={grid:"MovieGrid_grid__1kkiw"}},33:function(e,t,n){e.exports={main:"BackgroundInfo_main__GhQpF"}},40:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"setFilter",(function(){return w})),n.d(r,"setMovies",(function(){return C})),n.d(r,"setFetchState",(function(){return E}));var a=n(1),c=n(12),i=n.n(c),s=(n(40),n(9)),o=n.n(s),u=n(7),l=n.n(u),d=n(10),f=n(34),j=n(18),v=n.n(j),p=n(29),h=n(2);var b=function(e){var t=e.onChange,n=Object(a.useState)(""),r=Object(f.a)(n,2),c=r[0],i=r[1],s=function(){var e=Object(d.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.target.value,c!==r){e.next=3;break}return e.abrupt("return");case 3:i(r),t(r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{className:v.a.main,"data-testid":"search-box",children:Object(h.jsx)("form",{children:Object(h.jsx)("input",{"data-testid":"search-box-input",className:v.a.searchInput,placeholder:"Search movie...",type:"text",onChange:Object(p.debounce)(s,150)})})})},O=n(35),m=n(19),x=n.n(m);var _,g,S=function(e){var t=e.onChange,n=function(){var e=(new Date).getFullYear()-1977+1;return Object(O.a)(Array(e).keys()).map((function(e){return e+1977}))}();return Object(h.jsx)("div",{className:x.a.main,"data-testid":"filter-box",children:Object(h.jsx)("form",{children:Object(h.jsx)("select",{id:"years",name:"years",onChange:t,className:x.a.select,"data-testid":"filter-box-select",children:n.map((function(e){return Object(h.jsx)("option",{value:e,children:e},e)}))})})})},y=n(6),N=n(30),I=n.n(N);!function(e){e.LOADING="loading",e.ERROR="error",e.SUCCESS="success"}(_||(_={})),function(e){e.FILTER="filter",e.MOVIES="fetch"}(g||(g={}));var w=function(e){return function(t){t({type:g.FILTER,payload:e})}},R=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get("https://swapi.dev/api/films/?search=".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(e){return function(){var t=Object(d.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==e){t.next=3;break}return n({type:g.MOVIES,payload:[]}),t.abrupt("return");case 3:return n({type:_.LOADING}),t.prev=4,t.next=7,R(e);case 7:r=t.sent.data.results,n({type:g.MOVIES,payload:r}),n({type:_.SUCCESS}),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),n({type:_.ERROR});case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e){return t.apply(this,arguments)}}()},E=function(e){return function(t){return t({type:e})}},M=n(8),B={movies:[],filteredMovies:[],filter:0},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.FILTER:e.filter=t.payload;break;case g.MOVIES:e.movies=t.payload}return e.filteredMovies=e.movies.filter((function(t){return new Date(t.release_date).getFullYear()>=e.filter})),e},D=_.SUCCESS,A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.ERROR:case _.LOADING:case _.SUCCESS:e=t.type}return e},T=Object(M.c)({moviesState:k,fetchState:A}),F=n(31),G=Object(M.d)(T,{},Object(M.a)(F.a));var L=function(){var e=Object(y.b)(),t=Object(M.b)(r,e),n=t.setFilter,a=t.setMovies,c=Object(y.c)((function(e){return e.fetchState}));return Object(h.jsxs)("div",{className:o.a.main,children:[Object(h.jsx)("div",{className:o.a.title,children:"SearchMovies"}),Object(h.jsx)("div",{className:o.a.titleMobile,children:"SM"}),Object(h.jsxs)("div",{className:o.a.forms,children:[c===_.LOADING&&Object(h.jsx)("div",{className:o.a.loader}),Object(h.jsx)("div",{className:o.a.searchBox,children:Object(h.jsx)(b,{onChange:function(e){a(e)}})}),Object(h.jsx)(S,{onChange:function(e){var t=Number(e.target.value);n(t)}})]})]})},U=n(15),V=n.n(U);var K=function(e){var t=e.movie;return Object(h.jsx)("div",{className:V.a.main,"data-testid":"movie-grid-item",children:Object(h.jsxs)("div",{className:V.a.card,children:[Object(h.jsx)("h3",{children:t.title}),Object(h.jsxs)("h5",{children:[t.director,", ",t.release_date]}),Object(h.jsx)("div",{className:V.a.openingCrawl,children:t.opening_crawl})]})})},Y=n(32),W=n.n(Y);var q=function(){var e=Object(y.c)((function(e){return e.moviesState.filteredMovies}));return Object(h.jsx)("div",{className:W.a.grid,children:e.map((function(e){return Object(h.jsx)(K,{movie:e},e.episode_id)}))})},J=n(33),z=n.n(J);var H,Q=function(e){var t=e.msg;return Object(h.jsx)("div",{className:z.a.main,"data-testid":"background-info",children:t})};!function(e){e.NO_DATA="noData",e.ERROR="error",e.OK="ok"}(H||(H={}));var P=function(){!function(){var e=Object(y.c)((function(e){return e.moviesState.filteredMovies}));Object(a.useEffect)((function(){document.title=e[0]?e[0].title:"Star Wars"}),[e])}();var e,t,n=Object(y.c)((function(e){return e})),r=(e=n.fetchState,t=n.moviesState.filteredMovies,[_.SUCCESS,_.LOADING].includes(e)?t.length>0?H.OK:H.NO_DATA:H.ERROR);return Object(h.jsxs)("div",{children:[Object(h.jsx)(L,{}),Object(h.jsxs)("div",{style:{height:"calc(100% - 60px)"},children:[r===H.OK&&Object(h.jsx)(q,{}),r===H.ERROR&&Object(h.jsx)(Q,{msg:"Something went wrong while processing your request :("}),r===H.NO_DATA&&Object(h.jsx)(Q,{msg:"No data to display..."})]})]})},X=n(70),Z=n(69),$=new X.a;i.a.render(Object(h.jsx)(Z.a,{client:$,children:Object(h.jsx)(y.a,{store:G,children:Object(h.jsx)(P,{})})}),document.getElementById("root"))},9:function(e,t,n){e.exports={main:"TopBar_main__3jbC7",title:"TopBar_title__Bzx6C",loader:"TopBar_loader__IWjuD",titleMobile:"TopBar_titleMobile__KfqLi",forms:"TopBar_forms__9mc9E",searchBox:"TopBar_searchBox__VGWDu",spin:"TopBar_spin__137HL"}}},[[67,1,2]]]);
//# sourceMappingURL=main.8d77402e.chunk.js.map