(this["webpackJsonpreact-movie-search"]=this["webpackJsonpreact-movie-search"]||[]).push([[0],{15:function(e,t,r){e.exports={main:"MovieGridItem_main__3hrh2",card:"MovieGridItem_card__1CFmd",openingCrawl:"MovieGridItem_openingCrawl__2c37Q"}},18:function(e,t,r){e.exports={searchInput:"SearchBox_searchInput__3_bHU",main:"SearchBox_main__2WhmK"}},20:function(e,t,r){e.exports={select:"FilterBox_select__HXTit",main:"FilterBox_main__2osKt"}},32:function(e,t,r){e.exports={grid:"MovieGrid_grid__14a71"}},33:function(e,t,r){e.exports={main:"BackgroundInfo_main__9eUi0"}},40:function(e,t,r){},67:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"setFilter",(function(){return x})),r.d(n,"setMovies",(function(){return g})),r.d(n,"setFetchState",(function(){return y}));var a,c,i=r(1),s=r(12),o=r.n(s),u=(r(40),r(9)),l=r.n(u),d=r(8),j=r.n(d),f=r(10),v=r(34),p=r(18),O=r.n(p),b=r(5),h=r(7),m=r(29),_=r.n(m);!function(e){e.LOADING="loading",e.ERROR="error",e.SUCCESS="success"}(a||(a={})),function(e){e.FILTER="filter",e.MOVIES="fetch"}(c||(c={}));var x=function(e){return function(t){t({type:c.FILTER,payload:e})}},S=function(){var e=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("https://swapi.dev/api/films/?search=".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(e){return function(){var t=Object(f.a)(j.a.mark((function t(r){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==e){t.next=3;break}return r({type:c.MOVIES,payload:[]}),t.abrupt("return");case 3:return r({type:a.LOADING}),t.prev=4,t.next=7,S(e);case 7:n=t.sent.data.results,r({type:c.MOVIES,payload:n}),r({type:a.SUCCESS}),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),r({type:a.ERROR});case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e){return t.apply(this,arguments)}}()},y=function(e){return function(t){return t({type:e})}},N={movies:[],filteredMovies:[],filter:0},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.FILTER:e.filter=t.payload;break;case c.MOVIES:e.movies=t.payload}return e.filteredMovies=e.movies.filter((function(t){return new Date(t.release_date).getFullYear()>=e.filter})),e},I=a.SUCCESS,R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.ERROR:case a.LOADING:case a.SUCCESS:e=t.type}return e},E=Object(h.c)({moviesState:w,fetchState:R}),M=r(30),B=Object(h.d)(E,{},Object(h.a)(M.a)),C=r(31),k=r(2);var T=function(){var e=Object(i.useState)(""),t=Object(v.a)(e,2),r=t[0],a=t[1],c=Object(b.b)(),s=Object(h.b)(n,c).setMovies,o=function(){var e=Object(f.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r!==t.target.value){e.next=2;break}return e.abrupt("return");case 2:n=t.target.value,a(n),s(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsx)("div",{className:O.a.main,children:Object(k.jsx)("form",{children:Object(k.jsx)("input",{className:O.a.searchInput,placeholder:"Search movie...",type:"text",onChange:Object(C.debounce)(o,150)})})})},A=r(35),D=r(20),F=r.n(D);var G=function(){var e=Object(b.b)(),t=Object(h.b)(n,e).setFilter,r=function(){var e=(new Date).getFullYear()-1977+1;return Object(A.a)(Array(e).keys()).map((function(e){return e+1977}))}();return Object(k.jsx)("div",{className:F.a.main,children:Object(k.jsx)("form",{children:Object(k.jsx)("select",{id:"years",name:"years",onChange:function(e){var r=Number(e.target.value);t(r)},className:F.a.select,children:r.map((function(e){return Object(k.jsx)("option",{value:e,children:e},e)}))})})})};var L=function(){var e=Object(b.c)((function(e){return e.fetchState}));return Object(k.jsxs)("div",{className:l.a.main,children:[Object(k.jsx)("div",{className:l.a.title,children:"SearchMovies"}),Object(k.jsx)("div",{className:l.a.titleMobile,children:"SM"}),Object(k.jsxs)("div",{className:l.a.forms,children:[e===a.LOADING&&Object(k.jsx)("div",{className:l.a.loader}),Object(k.jsx)("div",{className:l.a.searchBox,children:Object(k.jsx)(T,{})}),Object(k.jsx)(G,{})]})]})},U=r(15),K=r.n(U);var V=function(e){var t=e.movie;return Object(k.jsx)("div",{className:K.a.main,"data-testid":"movie-grid-item",children:Object(k.jsxs)("div",{className:K.a.card,children:[Object(k.jsx)("h3",{children:t.title}),Object(k.jsxs)("h5",{children:[t.director,", ",t.release_date]}),Object(k.jsx)("div",{className:K.a.openingCrawl,children:t.opening_crawl})]})})},W=r(32),H=r.n(W);var J=function(){var e=Object(b.c)((function(e){return e.moviesState.filteredMovies}));return Object(k.jsx)("div",{className:H.a.grid,children:e.map((function(e){return Object(k.jsx)(V,{movie:e},e.episode_id)}))})},P=r(33),z=r.n(P);var Q,Y=function(e){var t=e.msg;return Object(k.jsx)("div",{className:z.a.main,"data-testid":"background-info",children:t})};!function(e){e.NO_DATA="noData",e.ERROR="error",e.OK="ok"}(Q||(Q={}));var Z=function(){!function(){var e=Object(b.c)((function(e){return e.moviesState.filteredMovies}));Object(i.useEffect)((function(){document.title=e[0]?e[0].title:"Star Wars"}),[e])}();var e,t,r=Object(b.c)((function(e){return e})),n=(e=r.fetchState,t=r.moviesState.filteredMovies,[a.SUCCESS,a.LOADING].includes(e)?t.length>0?Q.OK:Q.NO_DATA:Q.ERROR);return Object(k.jsxs)("div",{children:[Object(k.jsx)(L,{}),Object(k.jsxs)("div",{style:{height:"calc(100% - 60px)"},children:[n===Q.OK&&Object(k.jsx)(J,{}),n===Q.ERROR&&Object(k.jsx)(Y,{msg:"Something went wrong while processing your request :("}),n===Q.NO_DATA&&Object(k.jsx)(Y,{msg:"No data to display..."})]})]})},q=r(70),X=r(69),$=new q.a;o.a.render(Object(k.jsx)(X.a,{client:$,children:Object(k.jsx)(b.a,{store:B,children:Object(k.jsx)(Z,{})})}),document.getElementById("root"))},9:function(e,t,r){e.exports={main:"TopBar_main__zNNk2",title:"TopBar_title__1zHDp",loader:"TopBar_loader__1sZnD",titleMobile:"TopBar_titleMobile__3PuWP",forms:"TopBar_forms__18PIJ",searchBox:"TopBar_searchBox__3WwRA",spin:"TopBar_spin__wZSQI"}}},[[67,1,2]]]);
//# sourceMappingURL=main.ceed805b.chunk.js.map